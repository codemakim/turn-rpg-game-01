# BattleScene ë¦¬íŒ©í† ë§ ê³„íšì„œ

## ğŸ“‹ í˜„ì¬ ìƒí™© ë¶„ì„

### í˜„ì¬ BattleScene.ts ë¬¸ì œì 

- **545ì¤„**ì˜ ê±°ëŒ€í•œ íŒŒì¼ (ë‹¨ì¼ ì±…ì„ ì›ì¹™ ìœ„ë°˜)
- **6ê°€ì§€ ì„œë¡œ ë‹¤ë¥¸ ì±…ì„**ì„ ëª¨ë‘ ë‹´ë‹¹
- **AnimationManager ì¤‘ë³µ ì‚¬ìš©** (ì´ë¯¸ ì™„ë²½í•œ ëª¨ë“ˆì´ ìˆìŒ)
- **í™•ì¥ì„± ë¶€ì¡±** (í–¥í›„ 4ëª… ì•„êµ°, 8ëª… ì  ì§€ì› ì–´ë ¤ì›€)

### í˜„ì¬ íŒŒì¼ë³„ ì±…ì„ ë¶„ì„

```text
BattleScene.ts (545ì¤„) - ê³¼ë„í•œ ì±…ì„:
â”œâ”€â”€ ìºë¦­í„°/ìŠ¤í‚¬ ìƒì„± (í•˜ë“œì½”ë”©) âŒ â†’ BattleCharacterFactory
â”œâ”€â”€ ë ˆì´ì•„ì›ƒ ê³„ì‚° âŒ â†’ BattleLayoutManager  
â”œâ”€â”€ UI ìƒì„± ë° ê´€ë¦¬ âŒ â†’ BattleUIManager
â”œâ”€â”€ ì´ë²¤íŠ¸ ì²˜ë¦¬ âŒ â†’ BattleEventManager
â”œâ”€â”€ ì• ë‹ˆë©”ì´ì…˜ ì²˜ë¦¬ âŒ â†’ AnimationManager (ì¤‘ë³µ!)
â””â”€â”€ ê²Œì„ ë£¨í”„ ê´€ë¦¬ âœ… â†’ ì´ê²ƒë§Œ ë‚¨ê²¨ì•¼ í•¨

AnimationManager.ts (111ì¤„) - ì™„ë²½í•œ ëª¨ë“ˆì´ì§€ë§Œ ë¯¸í™œìš©:
â”œâ”€â”€ ì• ë‹ˆë©”ì´ì…˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ âœ…
â”œâ”€â”€ ë°ë¯¸ì§€/íšŒë³µ/í”ë“¤ë¦¼ ì• ë‹ˆë©”ì´ì…˜ âœ…
â””â”€â”€ EventBus ê¸°ë°˜ ì‹œìŠ¤í…œ âœ…

BattleController.ts (261ì¤„) - ì œëŒ€ë¡œ ëœ ì±…ì„:
â”œâ”€â”€ ì „íˆ¬ ë¡œì§ (ê³µê²©, ìŠ¤í‚¬, í„´ ê´€ë¦¬) âœ…
â”œâ”€â”€ ì´ë²¤íŠ¸ ë°œìƒ âœ…
â””â”€â”€ ìŠ¹ë¶€ íŒì • âœ…

BattleInputHandler.ts (147ì¤„) - ì œëŒ€ë¡œ ëœ ì±…ì„:
â”œâ”€â”€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ âœ…
â””â”€â”€ ì „íˆ¬ ì•¡ì…˜ ë³€í™˜ âœ…

UI ì»´í¬ë„ŒíŠ¸ë“¤ (694ì¤„) - ì œëŒ€ë¡œ ëœ ì±…ì„:
â”œâ”€â”€ CharacterUI.ts (223ì¤„) âœ…
â”œâ”€â”€ Button.ts (164ì¤„) âœ…
â”œâ”€â”€ StatusBar.ts (166ì¤„) âœ…
â””â”€â”€ TurnIndicator.ts (141ì¤„) âœ…
```

## ğŸ¯ ë¦¬íŒ©í† ë§ ëª©í‘œ

### ëª©í‘œ íŒŒì¼ êµ¬ì¡°

```text
src/scenes/
â”œâ”€â”€ BattleScene.ts (ëª©í‘œ: 100ì¤„) - ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ë§Œ
â””â”€â”€ managers/
    â”œâ”€â”€ BattleCharacterFactory.ts (ëª©í‘œ: 80ì¤„)
    â”œâ”€â”€ BattleLayoutManager.ts (ëª©í‘œ: 60ì¤„)
    â”œâ”€â”€ BattleUIManager.ts (ëª©í‘œ: 100ì¤„)
    â””â”€â”€ BattleEventManager.ts (ëª©í‘œ: 80ì¤„)
```

### ëª©í‘œ ì±…ì„ ë¶„ë°°

```text
BattleScene.ts:
â”œâ”€â”€ create() - ë§¤ë‹ˆì €ë“¤ ì´ˆê¸°í™”
â”œâ”€â”€ update() - ê²Œì„ ë£¨í”„
â””â”€â”€ destroy() - ë¦¬ì†ŒìŠ¤ ì •ë¦¬

BattleCharacterFactory.ts:
â”œâ”€â”€ createHeroSkills()
â”œâ”€â”€ createEnemySkills()
â”œâ”€â”€ createHeroes()
â””â”€â”€ createEnemies()

BattleLayoutManager.ts:
â”œâ”€â”€ calculateHeroPositions()
â”œâ”€â”€ calculateEnemyPositions()
â””â”€â”€ calculateButtonArea()

BattleUIManager.ts:
â”œâ”€â”€ createBackground()
â”œâ”€â”€ createCharacterUIs()
â”œâ”€â”€ createButtonUI()
â”œâ”€â”€ enableButtons()
â””â”€â”€ disableAllButtons()

BattleEventManager.ts:
â”œâ”€â”€ setupEventListeners()
â”œâ”€â”€ setupInputHandlerEvents()
â””â”€â”€ startPlayerTurn()

AnimationManager.ts (ê¸°ì¡´ í™œìš©):
â”œâ”€â”€ showDamageAnimation() âœ…
â”œâ”€â”€ showHealAnimation() âœ…
â””â”€â”€ shakeCharacter() âœ…
```

## ğŸ“ ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš

### Phase 1: BattleCharacterFactory ìƒì„±

**ëª©í‘œ**: ìºë¦­í„°/ìŠ¤í‚¬ ìƒì„± ë¡œì§ ë¶„ë¦¬
**ì‘ì—… ë‚´ìš©**:

1. `src/scenes/managers/BattleCharacterFactory.ts` ìƒì„±
2. `BattleScene.createCharacters()` ë©”ì„œë“œë¥¼ ìƒˆ í´ë˜ìŠ¤ë¡œ ì´ë™
3. í•˜ë“œì½”ë”©ëœ ìŠ¤í‚¬/ìºë¦­í„° ë°ì´í„°ë¥¼ íŒ©í† ë¦¬ ë©”ì„œë“œë¡œ ë¶„ë¦¬
4. `BattleScene`ì—ì„œ íŒ©í† ë¦¬ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •

**ì˜ˆìƒ ê²°ê³¼**:

- BattleScene.ts: 545ì¤„ â†’ 480ì¤„ (-65ì¤„)
- BattleCharacterFactory.ts: 80ì¤„ (ì‹ ê·œ)

### Phase 2: BattleLayoutManager ìƒì„±

**ëª©í‘œ**: ë ˆì´ì•„ì›ƒ ê³„ì‚° ë¡œì§ ë¶„ë¦¬
**ì‘ì—… ë‚´ìš©**:

1. `src/scenes/managers/BattleLayoutManager.ts` ìƒì„±
2. `BattleScene.calculateLayout()` ë©”ì„œë“œë¥¼ ìƒˆ í´ë˜ìŠ¤ë¡œ ì´ë™
3. ìœ„ì¹˜ ê³„ì‚° ë¡œì§ì„ ê°œë³„ ë©”ì„œë“œë¡œ ë¶„ë¦¬
4. `BattleScene`ì—ì„œ ë ˆì´ì•„ì›ƒ ë§¤ë‹ˆì € ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •

**ì˜ˆìƒ ê²°ê³¼**:

- BattleScene.ts: 480ì¤„ â†’ 440ì¤„ (-40ì¤„)
- BattleLayoutManager.ts: 60ì¤„ (ì‹ ê·œ)

### Phase 3: BattleUIManager ìƒì„±

**ëª©í‘œ**: UI ìƒì„± ë° ê´€ë¦¬ ë¡œì§ ë¶„ë¦¬
**ì‘ì—… ë‚´ìš©**:

1. `src/scenes/managers/BattleUIManager.ts` ìƒì„±
2. `BattleScene`ì˜ UI ê´€ë ¨ ë©”ì„œë“œë“¤ì„ ìƒˆ í´ë˜ìŠ¤ë¡œ ì´ë™:
   - `createBackground()`
   - `createCharacterUIs()`
   - `createButtonUI()`
   - `enableButtons()`
   - `disableAllButtons()`
   - `updateTurnIndicators()`
3. `BattleScene`ì—ì„œ UI ë§¤ë‹ˆì € ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •

**ì˜ˆìƒ ê²°ê³¼**:

- BattleScene.ts: 440ì¤„ â†’ 320ì¤„ (-120ì¤„)
- BattleUIManager.ts: 100ì¤„ (ì‹ ê·œ)

### Phase 4: BattleEventManager ìƒì„±

**ëª©í‘œ**: ì´ë²¤íŠ¸ ì²˜ë¦¬ ë¡œì§ ë¶„ë¦¬
**ì‘ì—… ë‚´ìš©**:

1. `src/scenes/managers/BattleEventManager.ts` ìƒì„±
2. `BattleScene`ì˜ ì´ë²¤íŠ¸ ê´€ë ¨ ë©”ì„œë“œë“¤ì„ ìƒˆ í´ë˜ìŠ¤ë¡œ ì´ë™:
   - `setupEventListeners()`
   - `setupInputHandlerEvents()`
   - `startPlayerTurn()`
3. `BattleScene`ì—ì„œ ì´ë²¤íŠ¸ ë§¤ë‹ˆì € ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •

**ì˜ˆìƒ ê²°ê³¼**:

- BattleScene.ts: 320ì¤„ â†’ 220ì¤„ (-100ì¤„)
- BattleEventManager.ts: 80ì¤„ (ì‹ ê·œ)

### Phase 5: AnimationManager í™œìš© (ì¤‘ë³µ ì œê±°)

**ëª©í‘œ**: ê¸°ì¡´ AnimationManager í™œìš©í•˜ì—¬ ì¤‘ë³µ ì œê±°
**ì‘ì—… ë‚´ìš©**:

1. `BattleScene.showDamageText()`, `showHealText()` ë©”ì„œë“œ ì œê±°
2. EventBusë¥¼ í†µí•œ ì• ë‹ˆë©”ì´ì…˜ ì´ë²¤íŠ¸ ë°œìƒìœ¼ë¡œ ë³€ê²½
3. `AnimationManager`ê°€ ì‹¤ì œë¡œ ì• ë‹ˆë©”ì´ì…˜ ì²˜ë¦¬í•˜ë„ë¡ ìˆ˜ì •
4. `BattleScene`ì—ì„œ ì§ì ‘ ì• ë‹ˆë©”ì´ì…˜ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œ ì œê±°

**ì˜ˆìƒ ê²°ê³¼**:

- BattleScene.ts: 220ì¤„ â†’ 180ì¤„ (-40ì¤„)
- AnimationManager.ts: 111ì¤„ â†’ 150ì¤„ (+39ì¤„, ì‹¤ì œ êµ¬í˜„ ì¶”ê°€)

### Phase 6: BattleScene ìµœì¢… ì •ë¦¬

**ëª©í‘œ**: BattleSceneì„ ìˆœìˆ˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í´ë˜ìŠ¤ë¡œ ì •ë¦¬
**ì‘ì—… ë‚´ìš©**:

1. ë¶ˆí•„ìš”í•œ ë©”ì„œë“œ ì •ë¦¬
2. ë§¤ë‹ˆì €ë“¤ ê°„ì˜ ì˜ì¡´ì„± ì •ë¦¬
3. ì½”ë“œ ì£¼ì„ ë° ë¬¸ì„œí™”
4. ìµœì¢… í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

**ì˜ˆìƒ ê²°ê³¼**:

- BattleScene.ts: 180ì¤„ â†’ 100ì¤„ (-80ì¤„)
- ì „ì²´ ì½”ë“œ í’ˆì§ˆ í–¥ìƒ

## âœ… ê²€ì¦ ê¸°ì¤€

### ê¸°ëŠ¥ ê²€ì¦

- [ ] ëª¨ë“  ê¸°ì¡´ ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™
- [ ] 61ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼
- [ ] ë²„íŠ¼ í´ë¦­ ì •ìƒ ë™ì‘
- [ ] ì• ë‹ˆë©”ì´ì…˜ ì •ìƒ í‘œì‹œ
- [ ] í„´ ì‹œìŠ¤í…œ ì •ìƒ ì‘ë™

### ì½”ë“œ í’ˆì§ˆ ê²€ì¦

- [ ] ê° íŒŒì¼ì´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜
- [ ] íŒŒì¼ í¬ê¸°ê°€ ì ì ˆí•¨ (100ì¤„ ì´í•˜)
- [ ] ì¤‘ë³µ ì½”ë“œ ì œê±°
- [ ] ëª…í™•í•œ ì˜ì¡´ì„± ê´€ê³„
- [ ] ë¦°í„° ì˜¤ë¥˜ ì—†ìŒ

### í™•ì¥ì„± ê²€ì¦

- [ ] ìƒˆë¡œìš´ ìºë¦­í„° ì¶”ê°€ ìš©ì´
- [ ] ìƒˆë¡œìš´ ìŠ¤í‚¬ ì¶”ê°€ ìš©ì´
- [ ] UI ë ˆì´ì•„ì›ƒ ë³€ê²½ ìš©ì´
- [ ] 4ëª… ì•„êµ°, 8ëª… ì  ì§€ì› ê°€ëŠ¥

## ğŸš¨ ì£¼ì˜ì‚¬í•­

### ê° Phaseë³„ ì£¼ì˜ì 

1. **Phase 1-4**: í•œ ë²ˆì— í•˜ë‚˜ì˜ ë§¤ë‹ˆì €ë§Œ ìƒì„±í•˜ì—¬ í…ŒìŠ¤íŠ¸
2. **Phase 5**: AnimationManager ìˆ˜ì • ì‹œ ê¸°ì¡´ ê¸°ëŠ¥ ì†ìƒ ì£¼ì˜
3. **Phase 6**: ìµœì¢… ì •ë¦¬ ì‹œ ëª¨ë“  ì˜ì¡´ì„± í™•ì¸

### ë¡¤ë°± ê³„íš

- ê° Phase ì™„ë£Œ í›„ ì»¤ë°‹
- ë¬¸ì œ ë°œìƒ ì‹œ ì´ì „ Phaseë¡œ ë¡¤ë°± ê°€ëŠ¥
- í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨

### ì„±ê³µ ê¸°ì¤€

- BattleScene.tsê°€ 100ì¤„ ì´í•˜ë¡œ ì¶•ì†Œ
- ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™
- ì½”ë“œ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- í–¥í›„ í™•ì¥ì´ ìš©ì´í•œ êµ¬ì¡°

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

### íŒŒì¼ í¬ê¸° ë³€í™”

```text
í˜„ì¬:
BattleScene.ts: 545ì¤„ (1ê°œ íŒŒì¼)

ëª©í‘œ:
BattleScene.ts: 100ì¤„
BattleCharacterFactory.ts: 80ì¤„
BattleLayoutManager.ts: 60ì¤„
BattleUIManager.ts: 100ì¤„
BattleEventManager.ts: 80ì¤„
AnimationManager.ts: 150ì¤„ (ê¸°ì¡´ 111ì¤„ + 39ì¤„)
ì´: 570ì¤„ (6ê°œ íŒŒì¼)
```

### ì¥ì 

- âœ… ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜
- âœ… í…ŒìŠ¤íŠ¸ ìš©ì´ì„± í–¥ìƒ
- âœ… ì¬ì‚¬ìš©ì„± ì¦ëŒ€
- âœ… ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ 
- âœ… í™•ì¥ì„± í–¥ìƒ
- âœ… ì½”ë“œ ê°€ë…ì„± í–¥ìƒ

ì´ ê³„íšì„œì— ë”°ë¼ ë‹¨ê³„ë³„ë¡œ ì‹¤í–‰í•˜ê² ìŠµë‹ˆë‹¤.
